<%- include('../partials/_navbar.ejs') %>

<h1>Matching Dashboard</h1>

<% if (volunteer && matchingListings && matchingListings.length > 0) { %>
    <h2>Your Volunteer Matches</h2>
    <% matchingListings.forEach(listing => { %>
        <p><a href="/listings/<%= listing._id %>"><%= listing.event %></a> in <%= listing.city %></p>
    <% }) %>
<% } else if (volunteer) { %>
    <p>No matching listings found.</p>
<% } %>

<% if (orgMatches && orgMatches.length > 0) { %>
    <h2>Your Organization Matches</h2>
    <% orgMatches.forEach(match => { %>
        <h3><%= match.listing.event %> in <%= match.listing.city %></h3>
        <% if (match.volunteers.length > 0) { %>
            <% match.volunteers.forEach(vol => { %>
                <p><%= vol.firstName %> <%= vol.lastName %> in <%= vol.location %></p>
            <% }) %>
        <% } else { %>
            <p>No matching volunteers for this listing.</p>
        <% } %>
    <% }) %>
<% } else { %>
    <p>No listings found for your organization.</p>
<% } %>
